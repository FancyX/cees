<link rel="stylesheet" href="/nav/css/cees/shiYanXiangMu/print.css">
<script src="/nav/jquery/jQuery.print.js"></script>
<script src="/nav/js/iframe2.js"></script>

##显示在右侧侧内容
<div>
##工具条
    <div class="content-bar" id="queryWrapper">
        <div class="layui-form-item">

            <div class="layui-inline">
                <label class="layui-form-label width-60">制模日期</label>
                <div class="layui-input-inline width-150">
                    <input type="text" class="layui-input" id="beginTime" placeholder="yyyy-MM-dd">
                </div>

                <label class="layui-form-label width-20">至</label>

                <div class="layui-input-inline width-150">
                    <input type="text" class="layui-input" id="endTime" placeholder="yyyy-MM-dd">
                </div>
                <div class="layui-input-inline width-150">
                    <input type="text" class="layui-input" id="queryStr">
                </div>

                <div class="layui-input-inline  width-64">
                    <button class="layui-btn " onclick="initGetShowCol(initTable)">查询</button>
                </div>

                <div class="layui-input-inline width-64">
                    <button class="layui-btn" lay-event="add" onclick="showAddModal()">新增</button>
                </div>

            </div>
        </div>
    </div>
##表格
    <table id="tableData" lay-filter="test"></table>

    <div id="chk" class="none">
        <div class="chk-wrapper">
            <i is-selected="false" class="icon-check-empty"></i>
        </div>
    </div>
##表格的工具条
    <script type="text/html" id="barDemo">
        <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
        <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="print">打印</a>
        <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
        <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
    </script>
</div>

##弹窗

##添加弹窗
<form id="addModal" class="layui-form my-layer-modal none" lay-filter="addModal" action="">

    <div class="layui-row margin-bottom-20">
        <table class="layui-table">
            <tbody>
            <tr>
                <td>
                    <div class="layui-col-md6">
                        <div class="layui-row margin-bottom-20">
                            <div class="red-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">委托单号
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="WTDBH" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                            <div class="red-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">试验编号
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="SYBH" readonly autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div class="blue-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">委托单位
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="WTDWMC" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">钢筋产地
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <select name="GJCD" lay-search>
                                        <option value="河北敬业">河北敬业</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div class="blue-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">来样日期
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="LYRQ" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">试验日期
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="SYRQ" readonly autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">级别
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <select name="JB" lay-search>
                                        <option value="/">/</option>
                                    </select>
                                </div>
                            </div>
                            <div class="blue-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">横截面积
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="HJMJ" readonly autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">规格/规格1
                                </div>
                                <div class="layui-input-inline layui-col-md2">
                                    <select name="GG" lay-search>
                                        <option value="D22">D22</option>
                                    </select>
                                </div>
                                <div class="layui-input-inline layui-col-md2">
                                    <select name="GG1" lay-search>
                                        <option value="D22">D22</option>
                                    </select>
                                </div>
                            </div>
                            <div class="blue-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">横截面积1
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="HJMJ1" readonly autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">焊条型号
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <select name="HTXH" lay-search>
                                        <option value="J502">J502</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">部位
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <select name="YT" lay-search>
                                        <option value="预制梁">预制梁</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="layui-col-md6">
                        <div class="layui-row margin-bottom-20">
                            <div class="blue-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">工程名称
                                </div>
                                <div class="layui-input-inline layui-col-md10">
                                    <input type="text" name="GCMC" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>

                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">钢筋种类
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <select name="GJZL" lay-search>
                                        <option value="热压带肋">热压带肋</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">牌号
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <select name="PH" lay-search>
                                        <option value="HRB400E">HRB400E</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md4 my-sm-lable">焊接类型及接头方式
                                </div>
                                <div class="layui-input-inline layui-col-md8">
                                    <input type="text" name="HJLX" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md4 my-sm-lable">原材试验编号
                                </div>
                                <div class="layui-input-inline layui-col-md8">
                                    <select name="YCLSYBH" lay-search>
                                        <option value="2017JS0401/0402GJ00721">2017JS0401/0402GJ00721</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">焊接人
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="HJR" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">代表焊接数量
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="DBHJSL" readonly autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div class="layui-col-md7">
                            ##todo -没有字段
                                <div class="layui-input-inline layui-col-md3 my-sm-lable">温度
                                </div>
                                <div class="layui-input-inline layui-col-md3">
                                    <input type="text" name="" autocomplete="off"
                                           class="layui-input">
                                </div>
                            ##todo -没有字段
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">湿度
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                            <div class="layui-col-md5">
                                <div class="layui-input-inline layui-col-md4 my-sm-lable">试验仪器编号
                                </div>
                                <div class="layui-input-inline layui-col-md8">
                                    <input type="text" name="YQBH" readonly autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>

                    </div>

                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="layui-row margin-bottom-20">
        <table class="layui-table text-center ">
            <tbody>
            <tr>
                <td rowspan="2" colspan="10">试件编号</td>
                <td colspan="40">极限强度</td>
                <td colspan="20">变形或断裂</td>
                <td colspan="30">冷弯试验</td>
            </tr>
            <tr>
                <td colspan="20">拉力(kN)</td>
                <td colspan="20">强度(MPa)</td>
                <td colspan="20">及位置</td>
                <td colspan="10">弯曲压头直径</td>
                <td colspan="10">角度</td>
                <td colspan="10">评定</td>
            </tr>
            <tr>
            ##试件编号
                <td colspan="10">
                    <input type="text" name="SJBH1" autocomplete="off" class="layui-input">
                </td>
            ##拉力
                <td colspan="20">
                    <input type="text" name="LL1" autocomplete="off" class="layui-input">
                </td>
            ##强度
                <td colspan="20">
                    <input type="text" name="QD1" autocomplete="off" class="layui-input">
                </td>
            ##及位置
                <td colspan="20">
                    <select name="BXHDLWZ1" lay-search>
                        <option value="焊接外延性断">2017JS0401/0402GJ0072焊接外延性断</option>
                    </select>
                </td>
            ##弯曲压头直径
                <td colspan="10">
                    <input type="text" name="WXZJ1" autocomplete="off" class="layui-input">
                </td>
            ##角度
                <td colspan="10">
                    <select name="JD1" lay-search>
                        <option value="180º">180º</option>
                    </select>
                </td>
            ##评定
                <td colspan="10">
                    <select name="PD1" lay-search>
                        <option value="合格">合格</option>
                        <option value="不合格">不合格</option>
                    </select>
                </td>
            </tr>
            <tr>
            ##试件编号
                <td colspan="10">
                    <input type="text" name="SJBH2" autocomplete="off" class="layui-input">
                </td>
            ##拉力
                <td colspan="20">
                    <input type="text" name="LL2" autocomplete="off" class="layui-input">
                </td>
            ##强度
                <td colspan="20">
                    <input type="text" name="QD2" autocomplete="off" class="layui-input">
                </td>
            ##及位置
                <td colspan="20">
                    <select name="BXHDLWZ2" lay-search>
                        <option value="焊接外延性断">2017JS0401/0402GJ0072焊接外延性断</option>
                    </select>
                </td>
            ##弯曲压头直径
                <td colspan="10">
                    <input type="text" name="WXZJ2" autocomplete="off" class="layui-input">
                </td>
            ##角度
                <td colspan="10">
                    <select name="JD2" lay-search>
                        <option value="180º">180º</option>
                    </select>
                </td>
            ##评定
                <td colspan="10">
                    <select name="PD2" lay-search>
                        <option value="合格">合格</option>
                        <option value="不合格">不合格</option>
                    </select>
                </td>
            </tr>
            <tr>
            ##试件编号
                <td colspan="10">
                    <input type="text" name="SJBH3" autocomplete="off" class="layui-input">
                </td>
            ##拉力
                <td colspan="20">
                    <input type="text" name="LL3" autocomplete="off" class="layui-input">
                </td>
            ##强度
                <td colspan="20">
                    <input type="text" name="QD3" autocomplete="off" class="layui-input">
                </td>
            ##及位置
                <td colspan="20">
                    <select name="BXHDLWZ3" lay-search>
                        <option value="焊接外延性断">2017JS0401/0402GJ0072焊接外延性断</option>
                    </select>
                </td>
            ##弯曲压头直径
                <td colspan="10">
                    <input type="text" name="WXZJ3" autocomplete="off" class="layui-input">
                </td>
            ##角度
                <td colspan="10">
                    <select name="JD3" lay-search>
                        <option value="180º">180º</option>
                    </select>
                </td>
            ##评定
                <td colspan="10">
                    <select name="PD3" lay-search>
                        <option value="合格">合格</option>
                        <option value="不合格">不合格</option>
                    </select>
                </td>
            </tr>
            <tr>
            ##试件编号
                <td colspan="10">
                    <input type="text" name="SJBH4" autocomplete="off" class="layui-input">
                </td>
            ##拉力
                <td colspan="20">
                    <input type="text" name="LL4" autocomplete="off" class="layui-input">
                </td>
            ##强度
                <td colspan="20">
                    <input type="text" name="QD4" autocomplete="off" class="layui-input">
                </td>
            ##及位置
                <td colspan="20">
                    <select name="BXHDLWZ4" lay-search>
                        <option value="焊接外延性断">2017JS0401/0402GJ0072焊接外延性断</option>
                    </select>
                </td>
            ##弯曲压头直径
                <td colspan="10">
                    <input type="text" name="WXZJ4" autocomplete="off" class="layui-input">
                </td>
            ##角度
                <td colspan="10">
                    <select name="JD4" lay-search>
                        <option value="180º">180º</option>
                    </select>
                </td>
            ##评定
                <td colspan="10">
                    <select name="PD4" lay-search>
                        <option value="合格">合格</option>
                        <option value="不合格">不合格</option>
                    </select>
                </td>
            </tr>
            <tr>
            ##试件编号
                <td colspan="10">
                    <input type="text" name="SJBH5" autocomplete="off" class="layui-input">
                </td>
            ##拉力
                <td colspan="20">
                    <input type="text" name="LL5" autocomplete="off" class="layui-input">
                </td>
            ##强度
                <td colspan="20">
                    <input type="text" name="QD5" autocomplete="off" class="layui-input">
                </td>
            ##及位置
                <td colspan="20">
                    <select name="BXHDLWZ5" lay-search>
                        <option value="焊接外延性断">2017JS0401/0402GJ0072焊接外延性断</option>
                    </select>
                </td>
            ##弯曲压头直径
                <td colspan="10">
                    <input type="text" name="WXZJ5" autocomplete="off" class="layui-input">
                </td>
            ##角度
                <td colspan="10">
                    <select name="JD5" lay-search>
                        <option value="180º">180º</option>
                    </select>
                </td>
            ##评定
                <td colspan="10">
                    <select name="PD5" lay-search>
                        <option value="合格">合格</option>
                        <option value="不合格">不合格</option>
                    </select>
                </td>
            </tr>
            <tr>
            ##试件编号
                <td colspan="10">
                    <input type="text" name="SJBH6" autocomplete="off" class="layui-input">
                </td>
            ##拉力
                <td colspan="20">
                    <input type="text" name="LL6" autocomplete="off" class="layui-input">
                </td>
            ##强度
                <td colspan="20">
                    <input type="text" name="QD6" autocomplete="off" class="layui-input">
                </td>
            ##及位置
                <td colspan="20">
                    <select name="BXHDLWZ6" lay-search>
                        <option value="焊接外延性断">2017JS0401/0402GJ0072焊接外延性断</option>
                    </select>
                </td>
            ##弯曲压头直径
                <td colspan="10">
                    <input type="text" name="WXZJ6" autocomplete="off" class="layui-input">
                </td>
            ##角度
                <td colspan="10">
                    <select name="JD6" lay-search>
                        <option value="180º">180º</option>
                    </select>
                </td>
            ##评定
                <td colspan="10">
                    <select name="PD6" lay-search>
                        <option value="合格">合格</option>
                        <option value="不合格">不合格</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td colspan="10">结论</td>
                <td colspan="50">
                    <select name="JL" lay-search>
                        <option value="依据JGJ18-2012，该焊件所试项目符合标准。">依据JGJ18-2012，该焊件所试项目符合标准。</option>
                    </select>
                </td>
                <td colspan="10">备注</td>
                <td colspan="30">
                    <select name="BZ" lay-search>
                        <option value=""></option>
                    </select>
                </td>

            </tr>
            </tbody>
        </table>
    </div>
    <div class="layui-row">
        <table class="layui-table">
            <tbody>
            <tr>
                <td>
                    <div class="layui-col-md3">

                        <div class="layui-input-inline layui-col-md3 my-sm-lable blue-font">
                            技术负责人
                        </div>
                        <div class="layui-col-md8">
                            <input type="text" name="JSFZR" readonly autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-col-md3">
                        <div class="layui-input-inline layui-col-md3 my-sm-lable blue-font">
                            校核人
                        </div>
                        <div class="layui-col-md8">
                            <input type="text" name="XHR" readonly autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-col-md3">
                        <div class="layui-input-inline layui-col-md3 my-sm-lable blue-font">
                            试验人
                        </div>
                        <div class="layui-col-md8">
                            <input type="text" name="SYR" readonly autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-col-md3">
                        <div class="layui-input-inline layui-col-md3 my-sm-lable blue-font">
                            报告日期
                        </div>
                        <div class="layui-col-md8">
                            <input type="text" name="BGRQ" disabled class="layui-input" placeholder="yyyy-MM-dd">
                            <input type="text" name="BGRQ" class="layui-input none" placeholder="yyyy-MM-dd">
                        </div>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

</form>

##修改弹窗
<form id="updateModal" class="layui-form my-layer-modal none" lay-filter="addModal" action="">
##隐藏字段
    <div class="layui-row none">
        <div class="layui-form-item">
            <div class="layui-inline blue-font">
                <label class="layui-form-label ">ID</label>
                <div class="layui-input-inline ">
                    <input type="text" name="lqmxeid" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
    </div>

    <div class="layui-row margin-bottom-20">
        <table class="layui-table">
            <tbody>
            <tr>
                <td>
                    <div class="layui-col-md6">
                        <div class="layui-row margin-bottom-20">
                            <div class="red-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">委托单号
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="WTDBH" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                            <div class="red-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">试验编号
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="SYBH" readonly autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div class="blue-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">委托单位
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="WTDWMC" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">钢筋产地
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <select name="GJCD" lay-search>
                                        <option value="河北敬业">河北敬业</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div class="blue-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">来样日期
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="LYRQ" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">试验日期
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="SYRQ" readonly autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">级别
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <select name="JB" lay-search>
                                        <option value="/">/</option>
                                    </select>
                                </div>
                            </div>
                            <div class="blue-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">横截面积
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="HJMJ" readonly autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">规格/规格1
                                </div>
                                <div class="layui-input-inline layui-col-md2">
                                    <select name="GG" lay-search>
                                        <option value="D22">D22</option>
                                    </select>
                                </div>
                                <div class="layui-input-inline layui-col-md2">
                                    <select name="GG1" lay-search>
                                        <option value="D22">D22</option>
                                    </select>
                                </div>
                            </div>
                            <div class="blue-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">横截面积1
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="HJMJ1" readonly autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">焊条型号
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <select name="HTXH" lay-search>
                                        <option value="J502">J502</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">部位
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <select name="YT" lay-search>
                                        <option value="预制梁">预制梁</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="layui-col-md6">
                        <div class="layui-row margin-bottom-20">
                            <div class="blue-font">
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">工程名称
                                </div>
                                <div class="layui-input-inline layui-col-md10">
                                    <input type="text" name="GCMC" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>

                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">钢筋种类
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <select name="GJZL" lay-search>
                                        <option value="热压带肋">热压带肋</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">牌号
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <select name="PH" lay-search>
                                        <option value="HRB400E">HRB400E</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md4 my-sm-lable">焊接类型及接头方式
                                </div>
                                <div class="layui-input-inline layui-col-md8">
                                    <input type="text" name="HJLX" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md4 my-sm-lable">原材试验编号
                                </div>
                                <div class="layui-input-inline layui-col-md8">
                                    <select name="YCLSYBH" lay-search>
                                        <option value="2017JS0401/0402GJ00721">2017JS0401/0402GJ00721</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="layui-row margin-bottom-20">
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">焊接人
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="HJR" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                            <div>
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">代表焊接数量
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="DBHJSL" readonly autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-row margin-bottom-20">
                            <div class="layui-col-md7">
                            ##todo -没有字段
                                <div class="layui-input-inline layui-col-md3 my-sm-lable">温度
                                </div>
                                <div class="layui-input-inline layui-col-md3">
                                    <input type="text" name="" autocomplete="off"
                                           class="layui-input">
                                </div>
                            ##todo -没有字段
                                <div class="layui-input-inline layui-col-md2 my-sm-lable">湿度
                                </div>
                                <div class="layui-input-inline layui-col-md4">
                                    <input type="text" name="" autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                            <div class="layui-col-md5">
                                <div class="layui-input-inline layui-col-md4 my-sm-lable">试验仪器编号
                                </div>
                                <div class="layui-input-inline layui-col-md8">
                                    <input type="text" name="YQBH" readonly autocomplete="off"
                                           class="layui-input">
                                </div>
                            </div>
                        </div>

                    </div>

                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="layui-row margin-bottom-20">
        <table class="layui-table text-center ">
            <tbody>
            <tr>
                <td rowspan="2" colspan="10">试件编号</td>
                <td colspan="40">极限强度</td>
                <td colspan="20">变形或断裂</td>
                <td colspan="30">冷弯试验</td>
            </tr>
            <tr>
                <td colspan="20">拉力(kN)</td>
                <td colspan="20">强度(MPa)</td>
                <td colspan="20">及位置</td>
                <td colspan="10">弯曲压头直径</td>
                <td colspan="10">角度</td>
                <td colspan="10">评定</td>
            </tr>
            <tr>
            ##试件编号
                <td colspan="10">
                    <input type="text" name="SJBH1" autocomplete="off" class="layui-input">
                </td>
            ##拉力
                <td colspan="20">
                    <input type="text" name="LL1" autocomplete="off" class="layui-input">
                </td>
            ##强度
                <td colspan="20">
                    <input type="text" name="QD1" autocomplete="off" class="layui-input">
                </td>
            ##及位置
                <td colspan="20">
                    <select name="BXHDLWZ1" lay-search>
                        <option value="焊接外延性断">2017JS0401/0402GJ0072焊接外延性断</option>
                    </select>
                </td>
            ##弯曲压头直径
                <td colspan="10">
                    <input type="text" name="WXZJ1" autocomplete="off" class="layui-input">
                </td>
            ##角度
                <td colspan="10">
                    <select name="JD1" lay-search>
                        <option value="180º">180º</option>
                    </select>
                </td>
            ##评定
                <td colspan="10">
                    <select name="PD1" lay-search>
                        <option value="合格">合格</option>
                        <option value="不合格">不合格</option>
                    </select>
                </td>
            </tr>
            <tr>
            ##试件编号
                <td colspan="10">
                    <input type="text" name="SJBH2" autocomplete="off" class="layui-input">
                </td>
            ##拉力
                <td colspan="20">
                    <input type="text" name="LL2" autocomplete="off" class="layui-input">
                </td>
            ##强度
                <td colspan="20">
                    <input type="text" name="QD2" autocomplete="off" class="layui-input">
                </td>
            ##及位置
                <td colspan="20">
                    <select name="BXHDLWZ2" lay-search>
                        <option value="焊接外延性断">2017JS0401/0402GJ0072焊接外延性断</option>
                    </select>
                </td>
            ##弯曲压头直径
                <td colspan="10">
                    <input type="text" name="WXZJ2" autocomplete="off" class="layui-input">
                </td>
            ##角度
                <td colspan="10">
                    <select name="JD2" lay-search>
                        <option value="180º">180º</option>
                    </select>
                </td>
            ##评定
                <td colspan="10">
                    <select name="PD2" lay-search>
                        <option value="合格">合格</option>
                        <option value="不合格">不合格</option>
                    </select>
                </td>
            </tr>
            <tr>
            ##试件编号
                <td colspan="10">
                    <input type="text" name="SJBH3" autocomplete="off" class="layui-input">
                </td>
            ##拉力
                <td colspan="20">
                    <input type="text" name="LL3" autocomplete="off" class="layui-input">
                </td>
            ##强度
                <td colspan="20">
                    <input type="text" name="QD3" autocomplete="off" class="layui-input">
                </td>
            ##及位置
                <td colspan="20">
                    <select name="BXHDLWZ3" lay-search>
                        <option value="焊接外延性断">2017JS0401/0402GJ0072焊接外延性断</option>
                    </select>
                </td>
            ##弯曲压头直径
                <td colspan="10">
                    <input type="text" name="WXZJ3" autocomplete="off" class="layui-input">
                </td>
            ##角度
                <td colspan="10">
                    <select name="JD3" lay-search>
                        <option value="180º">180º</option>
                    </select>
                </td>
            ##评定
                <td colspan="10">
                    <select name="PD3" lay-search>
                        <option value="合格">合格</option>
                        <option value="不合格">不合格</option>
                    </select>
                </td>
            </tr>
            <tr>
            ##试件编号
                <td colspan="10">
                    <input type="text" name="SJBH4" autocomplete="off" class="layui-input">
                </td>
            ##拉力
                <td colspan="20">
                    <input type="text" name="LL4" autocomplete="off" class="layui-input">
                </td>
            ##强度
                <td colspan="20">
                    <input type="text" name="QD4" autocomplete="off" class="layui-input">
                </td>
            ##及位置
                <td colspan="20">
                    <select name="BXHDLWZ4" lay-search>
                        <option value="焊接外延性断">2017JS0401/0402GJ0072焊接外延性断</option>
                    </select>
                </td>
            ##弯曲压头直径
                <td colspan="10">
                    <input type="text" name="WXZJ4" autocomplete="off" class="layui-input">
                </td>
            ##角度
                <td colspan="10">
                    <select name="JD4" lay-search>
                        <option value="180º">180º</option>
                    </select>
                </td>
            ##评定
                <td colspan="10">
                    <select name="PD4" lay-search>
                        <option value="合格">合格</option>
                        <option value="不合格">不合格</option>
                    </select>
                </td>
            </tr>
            <tr>
            ##试件编号
                <td colspan="10">
                    <input type="text" name="SJBH5" autocomplete="off" class="layui-input">
                </td>
            ##拉力
                <td colspan="20">
                    <input type="text" name="LL5" autocomplete="off" class="layui-input">
                </td>
            ##强度
                <td colspan="20">
                    <input type="text" name="QD5" autocomplete="off" class="layui-input">
                </td>
            ##及位置
                <td colspan="20">
                    <select name="BXHDLWZ5" lay-search>
                        <option value="焊接外延性断">2017JS0401/0402GJ0072焊接外延性断</option>
                    </select>
                </td>
            ##弯曲压头直径
                <td colspan="10">
                    <input type="text" name="WXZJ5" autocomplete="off" class="layui-input">
                </td>
            ##角度
                <td colspan="10">
                    <select name="JD5" lay-search>
                        <option value="180º">180º</option>
                    </select>
                </td>
            ##评定
                <td colspan="10">
                    <select name="PD5" lay-search>
                        <option value="合格">合格</option>
                        <option value="不合格">不合格</option>
                    </select>
                </td>
            </tr>
            <tr>
            ##试件编号
                <td colspan="10">
                    <input type="text" name="SJBH6" autocomplete="off" class="layui-input">
                </td>
            ##拉力
                <td colspan="20">
                    <input type="text" name="LL6" autocomplete="off" class="layui-input">
                </td>
            ##强度
                <td colspan="20">
                    <input type="text" name="QD6" autocomplete="off" class="layui-input">
                </td>
            ##及位置
                <td colspan="20">
                    <select name="BXHDLWZ6" lay-search>
                        <option value="焊接外延性断">2017JS0401/0402GJ0072焊接外延性断</option>
                    </select>
                </td>
            ##弯曲压头直径
                <td colspan="10">
                    <input type="text" name="WXZJ6" autocomplete="off" class="layui-input">
                </td>
            ##角度
                <td colspan="10">
                    <select name="JD6" lay-search>
                        <option value="180º">180º</option>
                    </select>
                </td>
            ##评定
                <td colspan="10">
                    <select name="PD6" lay-search>
                        <option value="合格">合格</option>
                        <option value="不合格">不合格</option>
                    </select>
                </td>
            </tr>



            <tr>
                <td colspan="10">结论</td>
                <td colspan="50">
                    <select name="JL" lay-search>
                        <option value="依据JGJ18-2012，该焊件所试项目符合标准。">依据JGJ18-2012，该焊件所试项目符合标准。</option>
                    </select>
                </td>
                <td colspan="10">备注</td>
                <td colspan="30">
                    <select name="BZ" lay-search>
                        <option value=""></option>
                    </select>
                </td>

            </tr>
            </tbody>
        </table>
    </div>
    <div class="layui-row">
        <table class="layui-table">
            <tbody>
            <tr>
                <td>
                    <div class="layui-col-md3">

                        <div class="layui-input-inline layui-col-md3 my-sm-lable blue-font">
                            技术负责人
                        </div>
                        <div class="layui-col-md8">
                            <input type="text" name="JSFZR" readonly autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-col-md3">
                        <div class="layui-input-inline layui-col-md3 my-sm-lable blue-font">
                            校核人
                        </div>
                        <div class="layui-col-md8">
                            <input type="text" name="XHR" readonly autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-col-md3">
                        <div class="layui-input-inline layui-col-md3 my-sm-lable blue-font">
                            试验人
                        </div>
                        <div class="layui-col-md8">
                            <input type="text" name="SYR" readonly autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-col-md3">
                        <div class="layui-input-inline layui-col-md3 my-sm-lable blue-font">
                            报告日期
                        </div>
                        <div class="layui-col-md8">
                            <input type="text" name="BGRQ" disabled class="layui-input" placeholder="yyyy-MM-dd">
                            <input type="text" name="BGRQ" class="layui-input none" placeholder="yyyy-MM-dd">
                        </div>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

</form>

##查看
<form id="detailModal" class="layui-form my-layer-modal none" lay-filter="detailModal" action=""></form>

##打印
<form id="printModal" class="layui-container none text-center">
    <div>
        <div class="layui-row">
            <div class="layui-col-md12">
                <div class="left">
                    记录表编号：JL-002-212
                </div>
            </div>
        </div>
        <div class="layui-row">
            <div class="layui-col-md12  text-center ">
                北京市公路质量检测中心
            </div>
        </div>
        <div class="layui-row">
            <div class="layui-col-md12 text-center ">
                <h3> 试 验 报 告</h3>
            </div>
        </div>
        <div class="layui-row margin-top-15">
            <div class="layui-col-md12">
                <div class="left">
                    委托单号：
                    <td name="WTDBH"></td>
                </div>
                <div class="right">
                    有见证
                </div>
            </div>
        </div>
        <div class="layui-row">
            <div class="layui-col-md12">
                <table class="table">
                    <tr>
                        <td colspan="16">委托单位</td>
                        <td colspan="84" name="WTDWMC"></td>
                    </tr>
                    <tr>
                        <td colspan="16">工程名称</td>
                        <td colspan="84" name="GCMC"></td>
                    </tr>
                    <tr>
                    ##todo 没有字段
                        <td colspan="16">试样名称</td>
                        <td colspan="34" name=""></td>
                    ##todo 没有字段
                        <td colspan="16">用途说明</td>
                        <td colspan="34" name=""></td>
                    </tr>
                    <tr>
                        <td colspan="16">材料产地</td>
                        <td colspan="34" name="CLCD"></td>
                    ##todo 没有字段
                        <td colspan="16">委托日期</td>
                        <td colspan="34" name=""></td>
                    </tr>
                    <tr>
                        <td colspan="16">样品描述</td>
                        <td colspan="84" name=""></td>
                    </tr>
                    <tr>
                        <td colspan="25" class="border-left-not-0 font-bold">试验规程</td>
                        <td colspan="25" class="border-0 font-bold">试验项目</td>
                        <td colspan="25" class="border-0 font-bold">试验日期</td>
                        <td colspan="25" class="border-right-not-0 font-bold">试验编号</td>
                    </tr>
                    <tr>
                        <td colspan="25" class="border-left-not-0">/</td>
                        <td colspan="25" class="border-0">/</td>
                        <td colspan="25" class="border-0">/</td>
                        <td colspan="25" class="border-right-not-0">/</td>
                    </tr>
                    <tr>
                        <td colspan="25" class="border-left-not-0">/</td>
                        <td colspan="25" class="border-0">/</td>
                        <td colspan="25" class="border-0">/</td>
                        <td colspan="25" class="border-right-not-0">/</td>
                    </tr>
                    <tr>
                        <td colspan="25" class="border-right-0 border-top-0">JTG E20-2011</td>
                        <td colspan="25" class="border-bottom-not-0">马歇尔稳定度</td>
                    ##试验日期
                        <td colspan="25" name="SYRQ" class="border-bottom-not-0"></td>
                    ##试验编号 todo 没有字段
                        <td colspan="25" class="border-left-0 border-top-0"></td>
                    </tr>
                    <tr>
                        <td colspan="100" class="border-bottom-0 font-bold">试验结果</td>
                    </tr>
                    <tr>
                        <td colspan="100" class="border-bottom-0 border-top-0" name="SYJG"></td>
                    </tr>
                    <tr>
                        <td colspan="25" class="border-left-not-0">1.油石比(%):</td>
                        <td colspan="75" class="border-right-not-0">/</td>
                    </tr>
                    <tr>
                        <td colspan="25" class="border-left-not-0">2.矿料级配</td>
                    ##todo 没有字段
                        <td colspan="75" class="border-right-not-0"></td>
                    </tr>
                    <tr>
                        <td colspan="7">筛孔mm</td>
                        <td colspan="6">37.5</td>
                        <td colspan="7">31.5</td>
                        <td colspan="6">26.5</td>
                        <td colspan="7">19.0</td>
                        <td colspan="6">16.0</td>
                        <td colspan="7">13.2</td>
                        <td colspan="6">9.5</td>
                        <td colspan="7">4.75</td>
                        <td colspan="6">2.36</td>
                        <td colspan="7">1.18</td>
                        <td colspan="7">0.6</td>
                        <td colspan="7">0.3</td>
                        <td colspan="7">0.15</td>
                        <td colspan="7">0.075</td>
                    </tr>
                    <tr>
                        <td colspan="7">通过%</td>
                        <td colspan="6">/</td>
                        <td colspan="7">/</td>
                        <td colspan="6">/</td>
                        <td colspan="7">/</td>
                        <td colspan="6">/</td>
                        <td colspan="7">/</td>
                        <td colspan="6">/</td>
                        <td colspan="7">/</td>
                        <td colspan="6">/</td>
                        <td colspan="7">/</td>
                        <td colspan="7">/</td>
                        <td colspan="7">/</td>
                        <td colspan="7">/</td>
                        <td colspan="7">/</td>
                    </tr>
                    <tr>
                        <td colspan="100" class="border-bottom-0 font-bold"></td>
                    </tr>
                    <tr>
                        <td colspan="25" class="border-left-not-0">3.马歇尔稳定度</td>
                    ##todo 没有字段
                        <td colspan="75" class="border-right-not-0"></td>
                    </tr>
                    <tr>

                        <td colspan="11" class="border-left-not-0">稳定度:</td>
                    ##todo 没有字段
                        <td colspan="11" class="border-0">10.07</td>
                        <td colspan="11" class="border-0">(kN)</td>
                        <td colspan="11" class="border-0">流值:</td>
                    ##todo 没有字段
                        <td colspan="11" class="border-0">3.2</td>
                        <td colspan="11" class="border-0">(mm)</td>
                        <td colspan="11" class="border-0">密度：</td>
                    ##todo 没有字段
                        <td colspan="11" class="border-0">2.494</td>
                        <td colspan="12" class="border-right-not-0">(g/cm3)</td>
                    </tr>
                    <tr>
                        <td colspan="100" class="border-top-0">(以下空白)</td>
                    </tr>
                    <tr>
                        <td colspan="16">结论</td>
                        <td colspan="84" name="JL"></td>
                    </tr>
                    <tr>
                        <td colspan="16">技术负责人</td>
                        <td colspan="20" name="JSFZR"></td>
                        <td colspan="12">校核人</td>
                        <td colspan="20" name="XHBZ"></td>
                        <td colspan="12">试验人</td>
                        <td colspan="20" name="SYR"></td>
                    </tr>
                    <tr>
                        <td colspan="16">报告日期</td>
                        <td colspan="84" name="BGRQ"></td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="layui-row top10">
            <div class="layui-col-md12">
                <div class="left">
                    声明:1.本结果只对所检测样品有效。2.未经本中心同意不得复制试验报告。本表于2016年7月1日起实施
                </div>
            </div>
        </div>
    </div>
</form>

<script src="/nav/js/iframe2.js"></script>
##全局变量
<script>

    //当前页面的请求的URL由各个页面定义此处为样本
    var urls = {
        showCol: '/shiYanXiangMu/GJHJ/getShowCol.action',
        select: '/shiYanXiangMu/GJHJ/search',
        add: '/shiYanXiangMu/GJHJ/add',
        update: '/shiYanXiangMu/GJHJ/update',
        delete: '/shiYanXiangMu/GJHJ/delete'
    };
</script>
##页面初始化
<script>
    window.onload = function (ev) {
        init();
        initLayuiLaydate("queryWrapper");
    };
</script>

<script>

    //初始化表格
    function initTable(displayCol) {

        //获取表头
        var getCols = function (json) {

            var data = json.data;
            var cols = [[]];
            // cols[0][0] = {field: 'checkbox', type: 'checkbox', title: '单选', fixed: 'left'};
            cols[0][0] = {field: 'checkbox', templet: '#chk', edit: false, title: '单选', fixed: 'left', event: 'chk'};
            for (var i = 0; i < data.length; i++) {
                var row = data[i];
                var gridmc = row['gridmc'].toLocaleLowerCase();

                var zw = row['zw'];
                var width = 90;
                if (zw.length > 4) {
                    width = width + (zw.length - 4) * 10;
                }
                if (gridmc.length - zw.length > 2) {
                    width += 24;
                }
                var col = {field: gridmc, title: zw, width: width, edit: false};
                cols[0].push(col);
            }
            var toolbar = {fixed: 'right', align: 'center', toolbar: '#barDemo', edit: false, title: '操作', width: 200};
            cols[0].push(toolbar);
            return cols;
        }

        //表格初始化和查询参数绑定
        var tableOptions = {
            elem: '#tableData',
            height: 510,
            url: urls.select, //数据接口
            page: true,//开启分页
            request: {
                pageName: 'page', //页码的参数名称，默认：page
                limitName: 'limit' //每页数据量的参数名，默认：limit
            },
            response: {
                statusName: 'code',//数据状态的字段名称，默认：code
                statusCode: 0,//成功的状态码，默认：0
                msgName: 'msg',//状态信息的字段名称，默认：msg
                countName: 'count', //数据总数的字段名称，默认：count
                dataName: 'data' //数据列表的字段名称，默认：data
            },
            where: {
                zmrqstart: jQuery("#beginTime").val(), //制模日期开始
                zmrqend: jQuery("#endTime").val(),  //制模日期结束
                queryStr: jQuery("#queryStr").val(), //查询字符串
                queryIntStr: jQuery("#queryStr").val()
            },
            skin: {
                size: 'sm'
            },
            cols: getCols(displayCol)
        };

        //执行一个 table 实例
        layui.use(['table'], function () {
            var table = layui.table;//表格
            table.render(tableOptions);

            //监听工具条
            //注：tool是工具条事件名，test是table原始容器的属性 lay-filter="对应的值"
            table.on('tool(test)', function (obj) {
                var data = obj.data; //获得当前行数据
                var layEvent = obj.event; //获得 lay-event 对应的值
                if (layEvent === 'del') {//删除
                    deleteRow(obj, data);
                } else if (layEvent === 'edit') {//编辑
                    showUpdateModal(obj, data);
                } else if (layEvent === 'detail') {//查看
                    showDetailModal(obj, data);
                } else if (layEvent === 'print') {//打印
                    showPrintModal(obj, data);
                } else if (layEvent === 'chk') {//打印

                    var oldStates = $(this).find("i").attr("is-selected") == "false" ? false : true;
                    //移除所有选中
                    $('.chk-wrapper').each(function () {
                        $(this).find("i").attr("is-selected", false);
                        $(this).find("i").removeClass("icon-check");
                        $(this).find("i").addClass("icon-check-empty");
                    });

                    if (oldStates) {//将当前选中移除
                        $(this).find("i").addClass('icon-check-empty');
                        $(this).find("i").removeClass("icon-check");
                        $(this).find("i").attr("is-selected", false);

                        selectCheckData = undefined;
                        selectCheck = undefined;
                    } else {//选中当前
                        $(this).find("i").removeClass('icon-check-empty');
                        $(this).find("i").addClass("icon-check");
                        $(this).find("i").attr("is-selected", true);

                        selectCheckData = obj.data;
                        selectCheck = $(this);
                    }
                }
            });
        });
    }

    //粘贴编号事件
    function getDataByTableNumber() {

        var formID = "addModal";

        var number = jQuery("#" + formID + " [name='kynumber']").val();

        if (isNull(number)) {
            failAlert("请先填写砂浆抗压编号");
            return;
        }

        jQuery.ajax({
            type: 'post',
            url: urls.select,
            dataType: 'json',
            data: {'sjkynumber': number, 'page': 1, 'limit': 1},
            async: false,
            success: function (json) {

                if (json.code == 0 &&
                        json.data != null && json.data != undefined) {
                    initModelByData(json.data[0], formID, moadlHtmls.add);
                    console.log(json.data);

                } else {
                    failAlert(json.msg);
                }

            },
            err: function (err) {
                failAlert("连接服务器失败,请重试！");
            }
        });
    }

    //显示添加弹窗
    function showAddModal() {
        if (isNotPower(baseData.cees_user)) {
            return false
        }

        var formID = 'addModal';

        if (selectCheck == undefined || selectCheckData == undefined) {
            initAddModel(formID);
        } else {
            initModelByData(selectCheckData, formID, moadlHtmls.add);
        }

        var index = layer.open({
            title: "添加",
            type: 1,
            area: ['980px', '560px'], //宽高
            content: jQuery('#' + formID),
            success: function (layero) {
                //这个函数就是在弹窗弹出成功后执行的函数
                //这个layer包含了弹窗里面的所有的html内容
                //有了这个就非常好办了，我用js调试了一下马上就定位到了弹窗框的位置然后改了他的class属性，成功。
                //这是我定位的第一个按钮的代码
                //var btn0 = layer[0].childNodes[3].childNodes[0];
            },
            btn: ['保存', '取消'],
            btnAlign: 'r', //按钮居右
            //shade: 0 ,//不显示遮罩
            btn1: function (index, layero) {//保存回调
                if (!check("addModal")) {
                    return false;
                }
                jQuery('#' + formID).ajaxSubmit({      //ajax方式提交表单

                    url: urls.add,
                    type: 'post',
                    dataType: 'json',
                    beforeSubmit: function (data, data2) {
                        // console.log(data)
                        // console.log(data2)
                    },
                    success: function (json) {

                        if (json.code == 0) {
                            var tips = layer.alert(json.msg, {
                                icon: 1,
                                skin: 'layer-ext-moon',
                                closeBtn: 0

                            }, function (thisIndex, layero) {
                                initGetShowCol(initTable);
                                layer.close(index);
                                layer.close(thisIndex);
                            });
                        } else {
                            console.log(json)
                            failAlert(json.msg);
                        }
                    },
                    clearForm: false,//禁止清楚表单
                    resetForm: false //禁止重置表单
                });
                return false; //开启该代码可禁止点击该按钮关闭
            },
            btn2: function (index, layero) {//取消回调
                layer.close(index);
            }
        });
        layer.full(index);
    }

    //显示修改弹窗
    function showUpdateModal(obj, data) {
        var modelId = 'updateModal';
        if (isNotPower(baseData.cees_user)) {
            return false;
        }
        //初始化数据
        initModelByData(data, modelId, moadlHtmls.update);

        var index = layer.open({
            title: "修改",
            type: 1,
            area: ['1240px', '620px'], //宽高
            content: jQuery('#' + modelId),
            success: function (layer) {
                //这个函数就是在弹窗弹出成功后执行的函数
                //这个layer包含了弹窗里面的所有的html内容
                //有了这个就非常好办了，我用js调试了一下马上就定位到了弹窗框的位置然后改了他的class属性，成功。
                //这是我定位的第一个按钮的代码
                //var btn0 = layer[0].childNodes[3].childNodes[0];
            },
            btn: ['保存', '取消'],
            btnAlign: 'r', //按钮居右
            //shade: 0 ,//不显示遮罩
            btn1: function (index, layero) {//保存回调
                if (!check("updateModal")) {
                    return false;
                }
                jQuery('#' + modelId).ajaxSubmit({      //ajax方式提交表单

                    url: urls.update,
                    type: 'post',
                    dataType: 'json',
                    beforeSubmit: function () {
                    },
                    success: function (json) {

                        if (json.code == 0) {
                            var tips = layer.alert(json.msg, {
                                icon: 1,
                                skin: 'layer-ext-moon',
                                closeBtn: 0

                            }, function (thisIndex, layero) {
                                initGetShowCol(initTable);
                                layer.close(index);
                                layer.close(thisIndex);
                            });
                        } else {
                            failAlert(json.msg);
                        }
                    },
                    clearForm: false,//禁止清楚表单
                    resetForm: false //禁止重置表单
                });
                return false; //开启该代码可禁止点击该按钮关闭
            },
            btn2: function (index, layero) {//取消回调
                layer.close(index);
            }
        });
        layer.full(index);
    }

    //显示删除弹窗
    function deleteRow(obj, data) {
        if (isNotPower(baseData.cees_user)) {
            return false
        }

        if (data.state == "提交") {
            failAlert("不能删除已提交数据！");
            return;
        }

        layer.confirm('真的删除行么', {
            icon: 3,
            title: '提示'
        }, function (index) {
            jQuery.ajax({
                type: 'post',
                url: urls.delete,
                dataType: 'json',
                data: {'id': data.lqmxeid},
                async: false,
                success: function (json) {
                    if (json.code == 0) {
                        initGetShowCol(initTable);
                        successAlert(json.msg);
                        obj.del();
                    } else {
                        failAlert(json.msg);
                    }
                },
                err: function (err) {
                    failAlert("连接服务器失败,请重试！");
                }
            });
            layer.close(index);
        });
    }

    //显示查看弹窗
    function showDetailModal(obj, data) {

        var detailFormID = 'detailModal';
        var domStr = jQuery("#updateModal").html();
        jQuery("#" + detailFormID).html(domStr);
        jQuery("#" + detailFormID + " input,select").attr("disabled", "disabled");
        //初始化数据
        initModelByData(data, detailFormID, moadlHtmls.update);

        var index = layer.open({
            title: "查看",
            type: 1,
            area: ['1240px', '620px'], //宽高
            content: jQuery('#' + detailFormID),
            success: function (layer) {
                //这个函数就是在弹窗弹出成功后执行的函数
                //这个layer包含了弹窗里面的所有的html内容
                //有了这个就非常好办了，我用js调试了一下马上就定位到了弹窗框的位置然后改了他的class属性，     成功。
                //这是我定位的第一个按钮的代码
                //var btn0 = layer[0].childNodes[3].childNodes[0];
            },
            btn: ['取消'],
            btnAlign: 'r', //按钮居右
            //shade: 0 ,//不显示遮罩
            btn1: function (index, layero) {
                layer.close(index);
            }
        });
        layer.full(index);
    }

    //显示打印弹窗
    function showPrintModal(obj, data) {
        var formID = 'printModal';
        initPrintModel(formID, data)

        var index = layer.open({
            title: "打印",
            type: 1,
            area: ['1240px', '620px'], //宽高
            content: jQuery('#printModal'),
            success: function (layer) {
                //这个函数就是在弹窗弹出成功后执行的函数
                //这个layer包含了弹窗里面的所有的html内容
                //有了这个就非常好办了，我用js调试了一下马上就定位到了弹窗框的位置然后改了他的class属性，成功。
                //这是我定位的第一个按钮的代码
                //var btn0 = layer[0].childNodes[3].childNodes[0];
            },
            btn: ['打印', '取消'],
            btnAlign: 'r', //按钮居右
            //shade: 0 ,//不显示遮罩
            btn1: function (index, layero) {
                jQuery('#printModal').print();
            },
            btn2: function (index, layero) {
                layer.close(index);
            }
        });
        layer.full(index);
    }

    //初始化当前页面的弹窗默认数据
    function initThisModalDefaultData(jqFormDom) {

    }

    //初始化修改和查看页面数据
    function initModelDataByData(data, formID) {
        var jqForm = jQuery("#" + formID);
        //为普通输入框赋值
        initModalInput(data, formID);
        //为弹窗灌入一些基础的数据
        initThisModalDefaultData(jqForm);
        //下拉框选中
        //稠度单位选择
        jqForm.find("select[name='CDDW']").val(data.cddw);
        //试块数
        jqForm.find("select[name='KUAISHU']").val(data.kuaishu);

        initLayuiFormSelect();//初始化select

        //来样日期
        initLayuiLaydateTimeStr(jqForm.find("input[name='LYRQ']"), data.lyrq);
        //试块收到日期
        initLayuiLaydateTimeStr(jqForm.find("input[name='SKSDRQ']"), data.sksdrq);
        //制模日期
        initLayuiLaydateTimeStr(jqForm.find("input[name='ZMRQ']"), data.zmrq);
        //要求试验日期
        initLayuiLaydateTimeStr(jqForm.find("input[name='YQSYRQ']"), data.yqsyrq);
        //试验日期
        initLayuiLaydateTimeStr(jqForm.find("input[name='SYRQ']"), data.syrq);
        //报告日期
        initLayuiLaydateTimeStr(jqForm.find("input[name='BGRQ']"), data.bgrq);

    }

    //添加 - 初始化弹窗
    function initAddModel(formID) {
        //为添加更新表单
        var jqForm = jQuery("#" + formID);
        jqForm.html(moadlHtmls.add);

        //初始化弹窗的默认数据
        initThisModalDefaultData(jqForm);

        //委托人
        jqForm.find("input[name='client']").val(baseData.cees_construction.client);
        //委托单位名称
        jqForm.find("input[name='WTDWMC']").val(baseData.cees_construction.construction);
        //工程名称
        jqForm.find("input[name='GCMC']").val(baseData.cees_project.project);
        //养护条件
        jqForm.find("input[name='YHTJ']").val('标养');

        //初始化没有事件的时间空间
        var initLaydateArr = jqForm.find("input[name='LYRQ'],[name='SKSDRQ']");
        initLayuiLaydateByArr(initLaydateArr);
        //设置制模龄期
        var lq = 28;
        initLayuiLaydateTime(jqForm.find("input[name='ZMRQ']"), new Date());
        initLayuiLaydateTime(jqForm.find("input[name='YQSYRQ'],[name='SYRQ']"), getNewTime(new Date(), lq));
        jqForm.find("input[name='YQLQ'],[name='SJLQ']").val(lq);

        //初始化select
        initLayuiFormSelect();
    }

    //修改 - 初始化弹窗
    function initModelByData(data, formID, html) {
        var jqForm = jQuery("#" + formID);
        jqForm.html(html);
        initModelDataByData(data, formID);
    }

    //查看 - 初始化弹窗
    function initDetailModel() {

    }

    //打印 - 初始化弹窗
    function initPrintModel(formID, data) {
        jQuery("#" + formID).html(moadlHtmls.print);
        var tds = [];
        jQuery("#" + formID + " td").each(function () {

            var name = $(this).attr("name");
            if (name != undefined && name != "" && name != null) {
                tds.push($(this));
            }
        });
        for (var key in data) {
            var value = data[key];

            if (value == null || value == undefined || value == "") {
                continue;
            }
            var dom = getPrintModelDom(key, tds);

            if (dom == undefined) {
                continue;
            }
            if (key.indexOf("rq") > 0 || key.indexOf("RQ") > 0) {
                value = getTime(value);
            }

            var domHtml = dom.html();
            if (domHtml == undefined || domHtml == '') {
                dom.html(value);
            } else {
                dom.html(domHtml + " " + value);
            }
        }

        jQuery("#" + formID + " [name='construction']").html(baseData.cees_construction.construction)
        jQuery("#" + formID + " [name='project,SGBW']").html(baseData.cees_project.project + ' - ' + jQuery("#" + formID + " [name='project,SGBW']").html());
    }

    //校验参数通过返回true
    function check(formId) {
        // if (isNull($("#" + formId + " input[name='SGBW']").val())) {
        //     failAlert("请填写施工部位！");
        //     return false;
        // }
        return true;
    }
</script>

